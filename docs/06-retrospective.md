# 프로젝트 회고

## 1. 가장 막혔던 지점

이번 프로젝트에서 가장 큰 난관은 **배포 환경(EC2)의 리소스 제한과 빌드과정에서의 문제**였다.

### 1-1. 메모리 부족으로 인한 서버 중단 (System Freeze)

- **상황:** GitHub Actions를 통해 배포가 시작되면, EC2 서버가 프리징되는 현상이 발생.
- **원인:** 프리티어 인스턴스(`t3.micro`)의 RAM은 1GB인데, Spring Boot와 Next.js를 동시에 빌드하면서 메모리 용량을 초과한것으로 보인다.
- **해결:** 리눅스의 **스왑 메모리(Swap Memory)** 기능을 활용하여, SSD의 2GB를 가상 메모리로 할당해 부족한 RAM을 보완. 이를 통해 빌드 멈춤 없이 배포가 완료되도록 조치.

### 1-2. EC2에서의 백엔드 연결 실패

- **에러 메시지:** `(index):1 Access to fetch at 'http://43.201.96.253:8080/api/guestbooks' from origin 'http://43.201.96.253:3000' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.Understand this error`
- **상황:** ec2 연결후 docker-compose up 했을때 백엔드가 연결이 안되는 문제 및 파일 수정 하였으나 계속 오류가나는 문제.
- **원인:** 로컬호스트에서만 허용했던 cors가 문제가 됨, 파일 수정 후에는 ec2서버에 있는 파일이 업데이트가 안되는 문제 발생.
- **해결:**  
  Frontend: app/page.js의 요청 주소를 EC2 퍼블릭 IP로 변경.
  ```
  [수정 전] fetch('http://localhost:8080/api/guestbooks')
  [수정 후] fetch('http://{인스턴스_퍼블릭_IP}:8080/api/guestbooks')
  ```
  Backend: GuestbookController.java에서 모든 출처 허용으로 변경.
  ```
  [수정 전] @CrossOrigin(origins = "http://localhost:3000")
  [수정 후] @CrossOrigin
  ```
      파일 수정 후에도 백엔드 연결 실패오류가 발생하여
      기존 인스턴스를 제거하고,  새로운 인스턴스에 배포 후 빌드하여 해결

## 2. 이해가 부족하다고 느낀 부분

### 프론트 엔드 - 백엔드 연결

- 프론트엔드와 백엔드를 연결하는 과정에 대한 이해가 부족하여 CORS 에러등을 해결하기 위해 프로젝트 진행동안 많은 시간을 쓰게 되었다.

### CI/CD 배포 전략

- **현재 방식 (Source Build):** 소스 코드를 서버로 보내서, 서버가 직접 빌드하고 실행하는 방식.
  - 로컬에서 작동한 방법을 서버에서 진행한다고 가정하고 깃허브를 서버에서 클론하여 빌드하다보니 서버에 가하는 부담이 커졌다고 생각하여 ci/cd배포에 관해 다음과 같이 찾아보게 됨.
- **개선 방식 (Docker Image Transfer):** 외부(GitHub Actions)에서 빌드를 마치고, **Docker Image**만 서버로 전송하는 방식.
  - 서버 안정성을 위해 **Docker Hub**나 **AWS ECR**을 이용해 '완제품(이미지)'을 배포한다는 것을 알게 되었다. 현재의 방식은 소규모 프로젝트에는 적합하지만, 확장성을 위해서는 **이미지 기반 배포**로 전환이 필요함을 알게됨.

## 3. 팀 프로젝트 전에 보완하고 싶은 기술

1.  **Docker Image 기반 CI/CD 구축:** 현재의 소스 코드 전송 방식을 넘어, Docker Hub를 연동하여 서버 부하가 없는 배포 파이프라인을 직접 구축해보고 싶다.
2.  **Nginx (Reverse Proxy) 도입:** 현재는 사용자가 `IP:3000`으로 포트 번호를 붙여서 접속해야 하는데, Nginx를 도입하여 기본 포트(80)로 깔끔하게 접속할 수 있도록 개선하고 싶다.
3.  **더많은 기능 구현 및 적용:** 기능의 범위를 제한하여 인프라와 배포 파이프라인 구축에 집중하는 프로젝트를 진행하였는데, 로그인/회원가입/수정/삭제등의 기능을 갖춘 더 확장하여 프로젝트에 적용할 수 있게 보완하고 싶다.

## 4. 혼자 진행하며 느낀 점

단순히 코드를 짜서 로컬(`localhost`)에서 돌리는 것과, 실제 사용자가 접속 가능한 **클라우드 서버에 배포하는 것**은 많이 다르다는 것을 체감.

- **인프라의 중요성:** AWS EC2를 직접 세팅하면서 권한 설정, 방화벽(보안 그룹) 등 개발 외적인 인프라 지식이 필요함을 알게 되었다.
- **자동화의 편리함:** 코드를 수정하고 수동으로 빌드하여 배포하고, 올리던 과정을 GitHub Actions로 자동화했을 때, "코드 한 줄 수정으로 배포가 끝나는" 경험은 개발 생산성에 얼마나 큰 영향을 미치는지 체감할 수 있었다.
- **1인 개발의 어려움:** 오류 및 에러가 발생하여 문제를 직면했을 시 스스로 해결 해야하며 이 과정에서 시간이 많이 소요됨을 느낌. 또한 문제 해결을 새로운 방향으로 제시하기 어려웠고, 간단한 코드 한줄의 문제였지만 발견하기 쉽지 않아 다른 사람의 시야로 보는 해결방법이 큰 도움이 되겠구나 하는것을 느낌.
